<script setup>
import MermaidChart from '../../../../components/MermaidChart.vue'

const chartCode = `flowchart TD;
    %% æ ·å¼å®šä¹‰
    classDef titleStyle fill:#e3f2fd,stroke:#3498db,stroke-width:2px,rx:5px,ry:5px,font-weight:bold;
    classDef causeStyle fill:#f3e5f5,stroke:#9c27b0,stroke-width:1px,rx:5px,ry:5px;
    classDef processStyle fill:#e8f5e8,stroke:#4caf50,stroke-width:1px,rx:5px,ry:5px;
    classDef eventStyle fill:#fff3e0,stroke:#ff9800,stroke-width:1px,rx:5px,ry:5px;
    classDef resultStyle fill:#e0f7fa,stroke:#00bcd4,stroke-width:1px,rx:5px,ry:5px;
    classDef keyNode fill:#ffebee,stroke:#f44336,stroke-width:1px,rx:5px,ry:5px;

    %% é¡¶å±‚èŠ‚ç‚¹
    A[å¼€å…ƒç››ä¸–<br>åˆ¶åº¦æ€§çŸ›ç›¾ç§¯ç´¯]
    
    %% ä¸‰ä¸ªä¸»è¦åˆ†æ”¯
    %% å†›äº‹å¤±è¡¡åˆ†æ”¯
    B1[å†›äº‹å¤±è¡¡]
    B11[åºœå…µåˆ¶ç“¦è§£]
    B12[å‹Ÿå…µåˆ¶å…´èµ·]
    B13[èŠ‚åº¦ä½¿æƒåŠ›è†¨èƒ€<br>å¤–é‡å†…è½»ï¼Œå°¾å¤§ä¸æ‰]
    
    %% ç¤¾ä¼šå±æœºåˆ†æ”¯
    B3[ç¤¾ä¼šå±æœº]
    B31[å‡ç”°åˆ¶ç ´å]
    B32[åœŸåœ°å…¼å¹¶]
    B33[ä¸­å¤®è´¢æ”¿ä¸æ§åˆ¶åŠ›åŸºç¡€è¢«ä¾µèš€]
    
    %% æ”¿æ²»è…è´¥åˆ†æ”¯
    B2[æ”¿æ²»è…è´¥]
    B21[ææ—ç”«ä¸“æƒ<br>é‡ç”¨èƒ¡å°†ï¼Œé˜»å¡è¨€è·¯]
    B22[æ¨å›½å¿ ä¹±æ”¿<br>æ¿€åŒ–çŸ›ç›¾]
    B23[ä¸­æ¢å¤±èƒ½ï¼Œå†³ç­–æ··ä¹±]
    
    %% æ ¸å¿ƒèŠ‚ç‚¹
    C5[å…³é”®äººç‰©ï¼šå®‰ç¦„å±±]
    C1[ç»“æ„æ€§ç«è¯æ¡¶]
    C2[æ¨å›½å¿ ä¸å®‰ç¦„å±±<br>æ¿€çƒˆçº·äº‰]
    C4[å›ä¹±æ ¸å¿ƒå®åŠ›]
    C6[èº«å…¼ä¸‰é•‡ï¼ŒæŒæ§ç²¾å…µ]
    C3[ç§¯è“„åŠ›é‡<br>å½¢æˆä¸ªäººå†›äº‹é›†å›¢]
    
    %% ç»“æœ
    D[755å¹´å†¬<br>å®‰ç¦„å±±äºèŒƒé˜³èµ·å…µ<br>å®‰å²ä¹‹ä¹±çˆ†å‘]
    
    %% å…³ç³»è¿çº¿
    A --> B1;
    A --> B3;
    A --> B2;
    
    B1 --> B11;
    B1 --> B12;
    B11 --> B13;
    B12 --> B13;
    B13 --> C5;
    B13 --> C1;
    
    B3 --> B31;
    B3 --> B32;
    B31 --> B33;
    B32 --> B33;
    B33 --> C1;
    
    B2 --> B21;
    B2 --> B22;
    B21 --> B23;
    B22 --> B23;
    B23 --> C1;
    B23 -- ç›´æ¥å¼•çˆ† --> C2;
    
    %% å­å›¾ï¼šå®‰ç¦„å±±å†›äº‹å‡†å¤‡
    subgraph militaryPrep [å®‰ç¦„å±±å†›äº‹å‡†å¤‡]
        style militaryPrep fill:#e3f2fd,stroke:#3498db,stroke-width:1px,rx:5px,ry:5px,font-weight:bold;
        C6 & C3;
    end
    
    C1 --> D;
    C5 --> militaryPrep;
    militaryPrep --> C4;
    C2 --> D;
    C4 --> D;
    
    %% åº”ç”¨æ ·å¼
    class A titleStyle;
    class B1,B2,B3 causeStyle;
    class B11,B12,B13,B21,B22,B23,B31,B32,B33,C2,C3 processStyle;
    class C1,C4,C5 keyNode;
    class C6 processStyle;
    class D eventStyle;
`
</script>

<template>
  <div class="cause-container">
    
    <div class="cause-content">
      <!-- ç›´æ¥åŸå›  -->
      <div class="cause-section">
        <h3>ç›´æ¥åŸå› </h3>
        <div class="cause-grid">
          <div class="cause-item">
            <div class="cause-icon">ğŸ‘‘</div>
            <div class="cause-info">
              <h4>æƒåŠ›æ–—äº‰</h4>
              <p>å®‰ç¦„å±±ä¸å®°ç›¸æ¨å›½å¿ ä¹‹é—´çš„æƒåŠ›æ–—äº‰æ—¥ç›Šæ¿€çƒˆï¼Œæ¨å›½å¿ å¤šæ¬¡å‘å”ç„å®—è¿›è°—è¨€ï¼Œå£°ç§°å®‰ç¦„å±±è°‹åã€‚</p>
            </div>
          </div>
          <div class="cause-item">
            <div class="cause-icon">ğŸ›¡ï¸</div>
            <div class="cause-info">
              <h4>èŠ‚åº¦ä½¿æƒåŠ›è†¨èƒ€</h4>
              <p>å®‰ç¦„å±±èº«å…¼èŒƒé˜³ã€å¹³å¢ã€æ²³ä¸œä¸‰é•‡èŠ‚åº¦ä½¿ï¼ŒæŒæ§åŒ—æ–¹å†›äº‹å¤§æƒï¼Œå…µåŠ›è¾¾åäº”ä¸‡ä¹‹å¤šï¼Œå½¢æˆå°¾å¤§ä¸æ‰ä¹‹åŠ¿ã€‚</p>
            </div>
          </div>
          <div class="cause-item">
            <div class="cause-icon">ğŸ’°</div>
            <div class="cause-info">
              <h4>ç»æµåˆ©ç›Šå†²çª</h4>
              <p>å®‰ç¦„å±±é€šè¿‡æ§åˆ¶æ²³åŒ—åœ°åŒºçš„ç»æµå‘½è„‰ï¼Œç§¯ç´¯äº†å¤§é‡è´¢å¯Œï¼Œä¸ä¸­å¤®æ”¿åºœçš„ç»æµåˆ©ç›Šäº§ç”Ÿå†²çªã€‚</p>
            </div>
          </div>
          <div class="cause-item">
            <div class="cause-icon">âš–ï¸</div>
            <div class="cause-info">
              <h4>æ°‘æ—çŸ›ç›¾</h4>
              <p>å®‰ç¦„å±±ä½œä¸ºèƒ¡äººå°†é¢†ï¼Œä¸å”æœä¸­å¤®çš„æ±‰æ—å®˜å‘˜ä¹‹é—´å­˜åœ¨æ·±åˆ»çš„æ°‘æ—çŸ›ç›¾ï¼Œæ„Ÿåˆ°å—åˆ°æ­§è§†ã€‚</p>
            </div>
          </div>
        </div>
      </div>

      <!-- ä¸‹æ–¹å·¦å³ä¸¤æ ï¼ˆç­‰é«˜ï¼‰ -->
      <div class="bottom-section">
        <!-- å·¦ä¾§ï¼šæ·±å±‚åŸå› ï¼ˆå››å®«æ ¼ï¼‰ -->
        <div class="left-bottom">
          <div class="deep-cause-section">
            <h3>æ·±å±‚åŸå› </h3>
            <div class="deep-cause-grid">
              <div class="deep-cause-card">
                <h4>æ”¿æ²»åˆ¶åº¦ç¼ºé™·</h4>
                <p>èŠ‚åº¦ä½¿åˆ¶åº¦è®¾è®¡åˆè¡·æ˜¯ä¸ºäº†åº”å¯¹è¾¹ç–†å±æœºï¼Œä½†åœ¨å”ç„å®—æ—¶æœŸé€æ¸å˜è´¨ã€‚èŠ‚åº¦ä½¿é›†å†›æƒã€è´¢æƒã€è¡Œæ”¿æƒäºä¸€èº«ï¼Œå½¢æˆ"æ—¢æœ‰å…¶åœŸåœ°ï¼Œåˆæœ‰å…¶äººæ°‘ï¼Œåˆæœ‰å…¶ç”²å…µï¼Œåˆæœ‰å…¶è´¢èµ‹"çš„ç‹¬ç«‹ç‹å›½ã€‚ç‰¹åˆ«æ˜¯å®‰ç¦„å±±èº«å…¼èŒƒé˜³ã€å¹³å¢ã€æ²³ä¸œä¸‰é•‡èŠ‚åº¦ä½¿ï¼ŒæŒæ§å…µåŠ›è¾¾åäº”ä¸‡ä¹‹å¤šï¼Œå å”æœè¾¹å†›æ€»æ•°çš„ä¸‰åˆ†ä¹‹ä¸€ï¼Œå½¢æˆå°¾å¤§ä¸æ‰ä¹‹åŠ¿ã€‚</p>
              </div>
              <div class="deep-cause-card">
                <h4>ä¸­å¤®æ”¿æ²»è…è´¥</h4>
                <p>å”ç„å®—åæœŸæ²‰è¿·äºäº«ä¹ï¼Œå°†æœæ”¿äº¤ç”±ææ—ç”«ã€æ¨å›½å¿ ç­‰å¥¸è‡£æŠŠæŒã€‚ææ—ç”«ä¸ºå·©å›ºç›¸ä½ï¼Œæ¨è¡Œ"ä»¥èƒ¡åˆ¶èƒ¡"æ”¿ç­–ï¼Œå¤§é‡ä»»ç”¨èƒ¡äººå°†é¢†æ‹…ä»»èŠ‚åº¦ä½¿ï¼Œè®¤ä¸ºä»–ä»¬ä¸ä¼šå¨èƒè‡ªå·±çš„ç›¸ä½ã€‚æ¨å›½å¿ ä¸Šå°åï¼Œä¸å®‰ç¦„å±±çŸ›ç›¾æ¿€åŒ–ï¼Œå¤šæ¬¡å‘å”ç„å®—è¿›è°—è¨€ï¼Œå£°ç§°å®‰ç¦„å±±è°‹åï¼Œè¿›ä¸€æ­¥åŠ å‰§äº†å±€åŠ¿çš„ç´§å¼ ã€‚</p>
              </div>
              <div class="deep-cause-card">
                <h4>ç¤¾ä¼šçŸ›ç›¾å°–é”</h4>
                <p>å”æœä¸­æœŸï¼ŒåœŸåœ°å…¼å¹¶æ—¥ç›Šä¸¥é‡ï¼Œå‡ç”°åˆ¶é€æ¸ç“¦è§£ï¼Œå¤§é‡å†œæ°‘å¤±å»åœŸåœ°ï¼Œæ²¦ä¸ºæµæ°‘æˆ–ä½ƒå†œã€‚åŒæ—¶ï¼Œè¾¹ç–†æˆ˜äº‰é¢‘ç¹ï¼Œå†›è´¹å¼€æ”¯å·¨å¤§ï¼Œæ”¿åºœä¸å¾—ä¸åŠ é‡ç¨æ”¶ï¼Œè¿›ä¸€æ­¥åŠ é‡äº†äººæ°‘è´Ÿæ‹…ã€‚ç»Ÿæ²»é˜¶çº§çš„å¥¢ä¾ˆæµªè´¹å’Œå®˜åƒšæœºæ„çš„è…è´¥ï¼Œä¹ŸåŠ å‰§äº†ç¤¾ä¼šçš„ä¸æ»¡æƒ…ç»ªã€‚</p>
              </div>
              <div class="deep-cause-card">
                <h4>æ°‘æ—æ”¿ç­–å¤±è¯¯</h4>
                <p>å”æœè™½ç„¶å®è¡Œå¼€æ˜çš„æ°‘æ—æ”¿ç­–ï¼Œä½†åœ¨å¤„ç†èƒ¡æ±‰å…³ç³»ä¸Šå­˜åœ¨æ·±å±‚æ¬¡é—®é¢˜ã€‚å¤§é‡èƒ¡äººå†…è¿åï¼Œä¸æ±‰æ—æ‚å±…ï¼Œæ–‡åŒ–å·®å¼‚å’Œç»æµåˆ©ç›Šå†²çªé€æ¸æ˜¾ç°ã€‚å®‰ç¦„å±±ç­‰èƒ¡äººå°†é¢†è™½ç„¶èº«å±…é«˜ä½ï¼Œä½†ä»å—åˆ°æ±‰æ—å®˜å‘˜çš„æ­§è§†å’Œæ’æŒ¤ï¼Œå¿ƒç†ä¸Šäº§ç”Ÿäº†å¼ºçƒˆçš„ä¸å®‰å…¨æ„Ÿã€‚ä¸­å¤®æ”¿åºœæœªèƒ½æœ‰æ•ˆè°ƒå’Œèƒ¡æ±‰çŸ›ç›¾ï¼Œä¸ºå›ä¹±åŸ‹ä¸‹äº†éšæ‚£ã€‚</p>
              </div>
            </div>
          </div>
        </div>

        <!-- å³ä¾§ï¼šå¯¼ç«ç´¢äº‹ä»¶æ—¶é—´è½´ -->
        <div class="right-bottom">
          <div class="trigger-section">
            <h3>å¯¼ç«ç´¢äº‹ä»¶</h3>
            <div class="trigger-timeline">
              <!-- äº‹ä»¶1 -->
              <div class="timeline-item">
                <div class="timeline-marker"></div>
                <div class="timeline-content">
                  <h4>æ¨å›½å¿ æ„é™·</h4>
                  <div class="timeline-date">754å¹´</div>
                  <p>æ¨å›½å¿ å¤šæ¬¡å‘å”ç„å®—è¿›è¨€ï¼Œå£°ç§°å®‰ç¦„å±±æœ‰è°‹åä¹‹å¿ƒï¼Œå»ºè®®å¬å®‰ç¦„å±±å…¥æœï¼Œè¯•æ¢å…¶æ„å›¾ã€‚</p>
                </div>
              </div>
              <!-- äº‹ä»¶2 -->
              <div class="timeline-item">
                <div class="timeline-marker"></div>
                <div class="timeline-content">
                  <h4>å®‰ç¦„å±±å…¥æœ</h4>
                  <div class="timeline-date">755å¹´2æœˆ</div>
                  <p>å®‰ç¦„å±±è¢«è¿«å…¥æœï¼Œå‘å”ç„å®—å“­è¯‰è‡ªå·±å—åˆ°æ¨å›½å¿ çš„è¿«å®³ï¼Œå”ç„å®—å®‰æŠšå¹¶åŠ å®˜è¿›çˆµã€‚</p>
                </div>
              </div>
              <!-- äº‹ä»¶3 -->
              <div class="timeline-item">
                <div class="timeline-marker"></div>
                <div class="timeline-content">
                  <h4>å®‰ç¦„å±±ç¦»äº¬</h4>
                  <div class="timeline-date">755å¹´6æœˆ</div>
                  <p>å®‰ç¦„å±±æ‹…å¿ƒè¢«æ¨å›½å¿ è°‹å®³ï¼Œä»¥è®¨ä¼å¥‘ä¸¹ä¸ºåï¼Œè¿…é€Ÿè¿”å›èŒƒé˜³ï¼Œå¼€å§‹å‡†å¤‡å›ä¹±ã€‚</p>
                </div>
              </div>
              <!-- äº‹ä»¶4 -->
              <div class="timeline-item">
                <div class="timeline-marker"></div>
                <div class="timeline-content">
                  <h4>æ¨å›½å¿ æŒ‘è¡…</h4>
                  <div class="timeline-date">755å¹´11æœˆ</div>
                  <p>æ¨å›½å¿ æ´¾äººåŒ…å›´å®‰ç¦„å±±åœ¨é•¿å®‰çš„åºœé‚¸ï¼Œé€®æ•å…¶é—¨å®¢ï¼Œè¿›ä¸€æ­¥æ¿€åŒ–çŸ›ç›¾ã€‚</p>
                </div>
              </div>
              <!-- äº‹ä»¶5 -->
              <div class="timeline-item">
                <div class="timeline-marker"></div>
                <div class="timeline-content">
                  <h4>å®‰ç¦„å±±èµ·å…µ</h4>
                  <div class="timeline-date">755å¹´12æœˆ</div>
                  <p>å®‰ç¦„å±±ä»¥"è®¨ä¼å¥¸è‡£æ¨å›½å¿ "ä¸ºåï¼Œåœ¨èŒƒé˜³èµ·å…µï¼Œç‡åäº”ä¸‡å¤§å†›å—ä¸‹ï¼Œæ­£å¼å‘åŠ¨å›ä¹±ã€‚</p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- ç››ä¸–ä¸ºä½•å´©å¡Œæµç¨‹å›¾ -->
      <div class="collapse-section">
        <h3>ç››ä¸–ä¸ºä½•å´©å¡Œ</h3>
        <div class="mermaid-container">
          <MermaidChart :code="chartCode" />
        </div>
      </div>
    </div>
  </div>
</template>

<style scoped>
.cause-container {
  height: 100%;
  overflow-y: auto;
  padding: 20px 20px 40px 20px;
  box-sizing: border-box;
  background: #f5f7fa;
}

/* ä¸»è¦å†…å®¹å¸ƒå±€ */
.cause-content {
  display: flex;
  flex-direction: column;
  gap: 25px;
}

/* ä¸‹æ–¹å·¦å³ä¸¤æ å¸ƒå±€ï¼ˆç­‰é«˜ï¼‰ */
.bottom-section {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 25px;
  align-items: stretch;
}

/* é€šç”¨åŒºå—æ ·å¼ */
.cause-section,
.trigger-section,
.deep-cause-section {
  background: none;
  padding: 0;
  border-radius: 0;
  box-shadow: none;
  height: 100%;
  box-sizing: border-box;
}

.cause-section,
.trigger-section {
  margin-bottom: 0;
}

h3 {
  color: #34495e;
  margin-top: 0;
  margin-bottom: 20px;
  font-size: 1.2rem;
  border-bottom: 2px solid #3498db;
  padding-bottom: 10px;
}

/* ç›´æ¥åŸå› ç½‘æ ¼ */
.cause-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 15px;
}

.cause-item {
  background: white;
  padding: 16px;
  border-radius: 6px;
  box-shadow: 0 2px 8px rgba(0,0,0,0.04);
  display: flex;
  align-items: flex-start;
  gap: 12px;
  transition: transform 0.2s, box-shadow 0.2s;
}

.cause-item:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(0,0,0,0.08);
}

.cause-icon {
  font-size: 1.8rem;
  flex-shrink: 0;
  margin-top: 2px;
}

.cause-info h4 {
  color: #2c3e50;
  margin-top: 0;
  margin-bottom: 8px;
  font-size: 1rem;
}

.cause-info p {
  color: #555;
  line-height: 1.4;
  margin: 0;
  font-size: 0.9rem;
}

/* å¯¼ç«ç´¢æ—¶é—´çº¿ */
.trigger-timeline {
  position: relative;
  padding-left: 0;
  height: calc(100% - 45px);
  overflow-y: auto;
}

.trigger-timeline::before {
  content: '';
  position: absolute;
  left: 40px;
  top: 0;
  bottom: 0;
  width: 3px;
  background: #3498db;
}

.timeline-item {
  position: relative;
  margin-bottom: 30px;
  padding-left: 80px;
}

.timeline-marker {
  position: absolute;
  left: 29px;
  top: 5px;
  width: 24px;
  height: 24px;
  background: #3498db;
  border-radius: 50%;
  box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.2);
  z-index: 1;
}

.timeline-content {
  background: white;
  padding: 16px;
  border-radius: 6px;
  box-shadow: 0 2px 8px rgba(0,0,0,0.04);
  border-left: 3px solid #3498db;
}

.timeline-content h4 {
  color: #2c3e50;
  margin-top: 0;
  margin-bottom: 10px;
  font-size: 1.1rem;
  display: inline-block;
  margin-right: 12px;
}

.timeline-date {
  display: inline-block;
  background: #e3f2fd;
  color: #2980b9;
  padding: 3px 8px;
  border-radius: 12px;
  font-size: 0.9rem;
  font-weight: 500;
  margin-bottom: 10px;
  vertical-align: middle;
}

.timeline-content p {
  color: #555;
  line-height: 1.5;
  margin: 0;
  font-size: 0.9rem;
}

/* æ·±å±‚åŸå› ç½‘æ ¼ - å››å®«æ ¼å¸ƒå±€ */
.deep-cause-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 15px;
  height: calc(100% - 45px);
  overflow-y: auto;
}

.deep-cause-card {
  background: white;
  padding: 16px;
  border-radius: 6px;
  box-shadow: 0 2px 8px rgba(0,0,0,0.04);
  /* å»æ‰é¡¶éƒ¨è¾¹æ¡†çº¿ */
}

.deep-cause-card h4 {
  color: #2c3e50;
  margin-top: 0;
  margin-bottom: 12px;
  font-size: 1rem;
}

.deep-cause-card p {
  color: #555;
  line-height: 1.5;
  margin: 0;
  font-size: 0.9rem;
}

/* ç››ä¸–ä¸ºä½•å´©å¡Œç« èŠ‚æ ·å¼ */
.collapse-section {
  margin-top: 25px;
}

.mermaid-container {
  background: white;
  padding: 20px;
  border-radius: 6px;
  box-shadow: 0 2px 8px rgba(0,0,0,0.04);
  overflow-x: auto;
}

/* å“åº”å¼è®¾è®¡ */
@media (max-width: 1200px) {
  .bottom-section {
    grid-template-columns: 1fr;
    gap: 20px;
  }
  
  .cause-grid,
  .deep-cause-grid {
    grid-template-columns: 1fr;
  }
  
  .mermaid-container {
    padding: 15px;
  }
}

@media (max-width: 768px) {
  .cause-container {
    padding: 15px;
  }
  
  .cause-section,
  .trigger-section,
  .deep-cause-section {
    padding: 0;
  }
  
  .trigger-timeline {
    padding-left: 30px;
  }
  
  .timeline-marker {
    left: 29px;
  }
  
  .mermaid-container {
    padding: 10px;
  }
}
</style>